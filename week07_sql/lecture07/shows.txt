sqlite3 shows.db

SELECT * FROM shows LIMIT 10;
SELECT * FROM ratings LIMIT 10;
SELECT COUNT(*) FROM shows;

.schema shows
.schema ratings

SELECT * FROM ratings WHERE rating >= 6.0 LIMIT 10;
SELECT show_id FROM ratings WHERE rating >= 6.0 LIMIT 10;
SELECT * FROM shows WHERE id = 62614;
SELECT * FROM shows WHERE id = 63881;

SELECT * FROM shows WHERE id IN
   ...> (SELECT show_id FROM ratings WHERE rating >= 6.0 LIMIT 10);

SELECT title FROM shows WHERE id IN
   ...> (SELECT show_id FROM ratings WHERE rating >= 6.0) LIMIT 10;

SELECT * FROM shows JOIN ratings ON shows.id = ratings.show_id WHERE rating >= 6.0 LIMIT 10;
SELECT title, rating FROM shows JOIN ratings ON shows.id = ratings.show_id WHERE rating >= 6.0 LIMIT 10;

SELECT * FROM genres LIMIT 10;
SELECT * FROM shows WHERE id = 63881;
.schema genres

SELECT show_id FROM genres WHERE genre = 'Comedy' LIMIT 10;

SELECT title FROM shows WHERE id IN
   ...> (SELECT show_id FROM genres WHERE genre = 'Comedy' LIMIT 10);

SELECT genre FROM genres WHERE show_id = 63881;

SELECT genre FROM genres WHERE show_id =
   ...> (SELECT id FROM shows WHERE title = 'Catweazle');

SELECT * FROM shows JOIN genres ON shows.id = genres.show_id WHERE id = 63881;
SELECT title, genre FROM shows JOIN genres ON shows.id = genres.show_id WHERE id = 63881;

SELECT * FROM shows WHERE title = 'The Office';
SELECT * FROM shows WHERE title = 'The Office' AND year = 2005;

SELECT person_id FROM stars WHERE show_id =
   ...> (SELECT id FROM shows WHERE title = 'The Office' AND year = 2005);

SELECT name FROM people WHERE id IN
   ...> (SELECT person_id FROM stars WHERE show_id IN
   ...> (SELECT id FROM shows WHERE title = 'The Office' AND year = 2005));

SELECT title FROM shows WHERE id IN
   ...> (SELECT show_id FROM stars WHERE person_id IN
   ...> (SELECT id FROM people WHERE name = 'Steve Carell'));

SELECT title FROM shows
   ...> JOIN stars ON shows.id = stars.show_id
   ...> JOIN people ON stars.person_id = people.id WHERE name = 'Steve Carell';

SELECT title FROM shows, stars, people
   ...> WHERE shows.id = stars.show_id
   ...> AND people.id = stars.person_id
   ...> AND name = 'Steve Carell';

.schema writers

.timer ON
SELECT * FROM shows WHERE title = 'The Office';
CREATE INDEX title_index ON shows (title);
CREATE INDEX person_index ON stars (person_id);
CREATE INDEX show_index ON stars (show_id);
CREATE INDEX name_index ON people (name);

.quit
